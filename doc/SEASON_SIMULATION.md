# è”èµ›èµ›å­£æ¨¡æ‹Ÿç³»ç»Ÿ

## æ¦‚è¿°

èµ›å­£æ¨¡æ‹Ÿç³»ç»Ÿå¯ä»¥æ¨¡æ‹Ÿå®Œæ•´çš„è”èµ›èµ›å­£ï¼ŒåŒ…æ‹¬èµ›ç¨‹ç”Ÿæˆã€é€è½®æ¯”èµ›ã€ç§¯åˆ†æ¦œè·Ÿè¸ªå’Œç»Ÿè®¡ã€‚

## åŠŸèƒ½

- âœ… **åŒå¾ªç¯èµ›åˆ¶**: è‡ªåŠ¨ç”Ÿæˆä¸»å®¢åœºåŒå¾ªç¯èµ›ç¨‹
- âœ… **å®Œæ•´èµ›å­£æ¨¡æ‹Ÿ**: é€è½®æ¨¡æ‹Ÿæ‰€æœ‰æ¯”èµ›
- âœ… **å®æ—¶ç§¯åˆ†æ¦œ**: åŠ¨æ€æ›´æ–°æ’å
- âœ… **æ¬§æˆ˜èµ„æ ¼**: è‡ªåŠ¨è®¡ç®—æ¬§å† ã€æ¬§è”èµ„æ ¼
- âœ… **å‡é™çº§**: è‡ªåŠ¨ç¡®å®šé™çº§çƒé˜Ÿ
- âœ… **å°„æ‰‹æ¦œ**: è·Ÿè¸ªè¿›çƒæ•°æ®
- âœ… **å¤šèµ›å­£ç»Ÿè®¡**: åˆ†æé•¿æœŸè¶‹åŠ¿

## æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SeasonSimulator                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FixtureGenerator          â”‚    League Table               â”‚
â”‚  â”œâ”€ circle method          â”‚    â”œâ”€ Points                  â”‚
â”‚  â”œâ”€ home/away balance      â”‚    â”œâ”€ Goal Difference         â”‚
â”‚  â””â”€ double round-robin     â”‚    â”œâ”€ Form tracking           â”‚
â”‚                            â”‚    â””â”€ Position tracking       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Match Simulation Loop                                      â”‚
â”‚  â”œâ”€ For each matchday                                       â”‚
â”‚  â”‚  â”œâ”€ Simulate all matches                                 â”‚
â”‚  â”‚  â”œâ”€ Update standings                                     â”‚
â”‚  â”‚  â””â”€ Save results                                         â”‚
â”‚  â””â”€ Generate statistics                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä½¿ç”¨æ–¹å¼

### æ¨¡æ‹Ÿå•èµ›å­£

```bash
# æ¨¡æ‹Ÿè‹±è¶…èµ›å­£
python scripts/simulate_season.py --league "Premier League"

# æ¨¡æ‹Ÿå¾·ç”²èµ›å­£
python scripts/simulate_season.py --league "Bundesliga"

# ä½¿ç”¨è”èµ›ID
python scripts/simulate_season.py --league-id 1
```

### å¤šèµ›å­£ç»Ÿè®¡

```bash
# æ¨¡æ‹Ÿ5ä¸ªèµ›å­£æŸ¥çœ‹å† å†›åˆ†å¸ƒ
python scripts/simulate_season.py --league "Bundesliga" --multi 5
```

### ä»£ç ä¸­ä½¿ç”¨

```python
from fm_manager.engine.season_simulator import SeasonSimulator

async def run_season():
    simulator = SeasonSimulator(session)
    
    result = await simulator.simulate_season(
        league_id=1,                    # League ID
        season_year=2024,               # Starting year
        start_date=date(2024, 8, 15),   # Season start
        progress_callback=on_progress,  # Progress callback
    )
    
    # Get results
    champion = result.get_champion()
    relegated = result.get_relegated(3)
    european_spots = result.get_european_spots(cl_spots=4, el_spots=2)
    
    # Print standings
    from fm_manager.engine.season_simulator import print_standings
    print_standings(result.standings, "Premier League Table")
```

## èµ›ç¨‹ç”Ÿæˆç®—æ³•

ä½¿ç”¨ **Circle Method** ç”ŸæˆåŒå¾ªç¯èµ›ç¨‹:

1. **ç¬¬ä¸€è½®å®‰æ’**: å°†çƒé˜Ÿæ’æˆåœ†å½¢ï¼Œå›ºå®šä¸€é˜Ÿï¼Œå…¶ä½™æ—‹è½¬
2. **å¯¹é˜µç”Ÿæˆ**: æ¯è½®é…å¯¹ç›¸å¯¹çš„çƒé˜Ÿ
3. **ä¸»åœºåˆ†é…**: äº¤æ›¿ä¸»å®¢åœºç¡®ä¿å¹³è¡¡
4. **ç¬¬äºŒè½®**: äº¤æ¢ä¸»å®¢åœºè¿›è¡Œç¬¬äºŒå¾ªç¯

### ç¤ºä¾‹ (4é˜Ÿ)

```
Round 1: A vs D, B vs C
Round 2: A vs C, D vs B  
Round 3: A vs B, C vs D
Round 4: D vs A, C vs B  (reverse)
Round 5: C vs A, B vs D  (reverse)
Round 6: B vs A, D vs C  (reverse)
```

## ç§¯åˆ†æ¦œè§„åˆ™

æ ‡å‡†ä¸‰åˆ†åˆ¶æ’å:
1. **ç§¯åˆ†**: èƒœ3åˆ†ï¼Œå¹³1åˆ†ï¼Œè´Ÿ0åˆ†
2. **å‡€èƒœçƒ**: è¿›çƒæ•° - å¤±çƒæ•°
3. **è¿›çƒæ•°**: æ€»è¿›çƒæ•°

### æ¬§æˆ˜èµ„æ ¼åˆ†é…

- **Champions League**: å‰4åï¼ˆè‹±è¶…/è¥¿ç”²/æ„ç”²/å¾·ç”²ï¼‰æˆ–å‰3åï¼ˆæ³•ç”²ï¼‰
- **Europa League**: æ¥ä¸‹æ¥çš„2-3å
- **Conference League**: éƒ¨åˆ†è”èµ›çš„ç¬¬7å

### å‡é™çº§

- **è‹±è¶…**: å3åé™çº§åˆ°è‹±å† 
- **å¾·ç”²**: å2åé™çº§ï¼Œç¬¬16åæ‰“é™„åŠ èµ›
- **è¥¿ç”²/æ„ç”²**: å3åé™çº§
- **æ³•ç”²**: å2åé™çº§ï¼Œç¬¬16åæ‰“é™„åŠ èµ›

## ç¤ºä¾‹è¾“å‡º

```
                     Final Premier League Table 2024-25                      
â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”³â”â”â”â”â”³â”â”â”â”â”³â”â”â”â”â”³â”â”â”â”â”â”³â”â”â”â”â”â”³â”â”â”â”â”â”â”â”“
â”ƒ Pos â”ƒ Team              â”ƒ  P â”ƒ  W â”ƒ  D â”ƒ  L â”ƒ GF â”ƒ  GD â”ƒ Pts   â”ƒ
â”¡â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â•‡â”â”â”â”â•‡â”â”â”â”â•‡â”â”â”â”â•‡â”â”â”â”â”â•‡â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”©
â”‚  ğŸ¥‡ â”‚ Liverpool         â”‚ 38 â”‚ 21 â”‚  6 â”‚ 11 â”‚ 89 â”‚ +26 â”‚  69   â”‚
â”‚  ğŸ¥ˆ â”‚ Manchester United â”‚ 38 â”‚ 19 â”‚  4 â”‚ 15 â”‚ 76 â”‚ +17 â”‚  61   â”‚
â”‚  ğŸ¥‰ â”‚ Arsenal           â”‚ 38 â”‚ 19 â”‚  4 â”‚ 15 â”‚ 76 â”‚ +12 â”‚  61   â”‚
â”‚   4 â”‚ Tottenham         â”‚ 38 â”‚ 17 â”‚  9 â”‚ 12 â”‚ 77 â”‚ +21 â”‚  60   â”‚
â”‚ ... â”‚ ...               â”‚ ...â”‚ ...â”‚ ...â”‚ ...â”‚ ...â”‚ ... â”‚ ...   â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ† Champion: Liverpool (69 points)
â­ Champions League: Liverpool, Manchester United, Arsenal, Tottenham
ğŸŒ Europa League: Manchester City, Everton
â¬‡ï¸ Relegated: Burnley, Crystal Palace, Fulham

Top Scorers:
  1. Jonas MÃ¼ller: 69 goals
  2. Elias Becker: 57 goals
  3. Theo Santos: 52 goals
```

## ç»Ÿè®¡éªŒè¯

åŸºäº2023-24èµ›å­£çœŸå®æ•°æ®:

| è”èµ› | åœºå‡è¿›çƒ | ä¸»åœºèƒœç‡ | å¹³å±€ç‡ | å† å†›ç§¯åˆ† |
|-----|---------|---------|--------|---------|
| è‹±è¶… | 2.8 | 47% | 24% | 91åˆ† |
| å¾·ç”² | 3.2 | 45% | 22% | 90åˆ† |
| è¥¿ç”² | 2.5 | 48% | 25% | 91åˆ† |
| æ„ç”² | 2.7 | 46% | 26% | 90åˆ† |
| æ³•ç”² | 2.3 | 49% | 24% | 76åˆ† |

## æ¼”ç¤º

```bash
# æŸ¥çœ‹å¾·ç”²èµ›å­£
python scripts/simulate_season.py --league "Bundesliga"

# 5ä¸ªèµ›å­£ç»Ÿè®¡åˆ†æ
python scripts/simulate_season.py --league "Bundesliga" --multi 5
```

## æœªæ¥æ”¹è¿›

- [ ] **æ¯èµ›æ·˜æ±°åˆ¶**: æ¬§å† ã€å›½å†…æ¯èµ›
- [ ] **æ¬§æˆ˜ç§¯åˆ†**: è·¨è”èµ›æ¬§æˆ˜èµ„æ ¼
- [ ] **çƒå‘˜ä¼¤ç—…**: èµ›å­£ä¸­çƒå‘˜å—ä¼¤
- [ ] **è½¬ä¼šçª—å£**: èµ›å­£ä¸­è½¬ä¼šå½±å“
- [ ] **åŠ¨æ€å®åŠ›**: çƒé˜ŸçŠ¶æ€èµ·ä¼
- [ ] **VARåˆ¤ç½š**: äº‰è®®åˆ¤ç½šäº‹ä»¶
- [ ] **å¤©æ°”å½±å“**: ä¸åŒå¤©æ°”å¯¹æ¯”èµ›çš„å½±å“
- [ ] **æ•™ç»ƒå˜åŠ¨**: èµ›å­£ä¸­æ¢å¸…å½±å“
