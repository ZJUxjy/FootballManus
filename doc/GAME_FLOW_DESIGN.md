# FM Manager 完整游戏流程设计

## 游戏概述

FM Manager 是一个多人联机足球经理游戏，支持1-4名玩家同时管理不同的俱乐部，进行完整的赛季竞争。

## 核心游戏循环

```
赛季开始
    ↓
俱乐部选择
    ↓
阵容管理 → 转会市场 → 战术设置
    ↓
比赛周
    ├─ 赛前准备 (战术调整、球员选择)
    ├─ 比赛日 (观看/跳过比赛)
    └─ 赛后 (球员恢复、新闻)
    ↓
转会窗口 (特定周数开放)
    ↓
重复直到赛季结束
    ↓
赛季总结 → 颁奖典礼 → 新赛季
```

## 游戏阶段详解

### Phase 1: 大厅/房间 (Lobby)

**功能**:
- 创建/加入游戏房间
- 选择游戏模式 (单机/联机)
- 配置赛季参数
- 邀请AI经理加入

**玩家操作**:
```
1. 创建房间
   - 设置房间名称
   - 选择最大玩家数 (1-4)
   - 选择联赛 (英超/西甲/德甲等)
   - 启用AI经理 (是/否)
   - 设置赛季长度 (38/76场)

2. 加入房间
   - 浏览可用房间列表
   - 输入房间ID加入
   - 选择玩家名称

3. 等待其他玩家
   - 查看玩家列表
   - 聊天交流
   - 准备/取消准备
```

### Phase 2: 俱乐部选择

**功能**:
- 浏览可选俱乐部
- 查看俱乐部信息
- 锁定选择

**玩家操作**:
```
1. 查看俱乐部列表
   - 按联赛筛选
   - 按声望排序
   - 查看俱乐部详情:
     * 预算
     * 阵容实力
     * 青训评级
     * 球迷期望

2. 选择俱乐部
   - 点击选择
   - 确认锁定
   - 等待其他玩家

3. AI自动选择 (如果启用)
   - 剩余俱乐部由AI管理
```

### Phase 3: 赛季进行 (核心循环)

#### 3.1 主界面 (Dashboard)

**显示信息**:
```
┌─────────────────────────────────────────┐
│  [俱乐部Logo]  俱乐部名称                │
│  联赛排名: #3  积分: 45                 │
│  下一场比赛: vs Arsenal (3天后)         │
├─────────────────────────────────────────┤
│  快捷操作:                              │
│  [阵容] [战术] [转会] [青训] [财务]    │
├─────────────────────────────────────────┤
│  最新消息:                              │
│  - 球员A伤愈复出                        │
│  - 收到对球员B的报价                    │
│  - 董事会满意当前表现                   │
├─────────────────────────────────────────┤
│  [推进到比赛日] [保存游戏] [设置]      │
└─────────────────────────────────────────┘
```

#### 3.2 阵容管理

**功能**:
- 查看所有球员
- 调整首发阵容
- 设置替补
- 查看球员状态

**玩家操作**:
```
1. 查看球员列表
   - 按位置筛选
   - 按能力排序
   - 查看详细信息:
     * 属性雷达图
     * 近期表现
     * 伤病历史
     * 士气/状态

2. 调整阵容
   - 拖拽设置首发
   - 选择阵型 (4-3-3/4-4-2/3-5-2等)
   - 设置队长/任意球手
   - 查看化学反应

3. 球员操作
   - 查看训练报告
   - 续约谈判
   - 放入转会名单
   - 下放青年队
```

#### 3.3 战术设置

**功能**:
- 设置比赛风格
- 调整战术指令
- 针对对手设置

**玩家操作**:
```
1. 比赛风格
   - 控球型 (Tiki-Taka)
   - 反击型 (Counter-Attack)
   - 高位逼抢 (Gegenpressing)
   - 长传冲吊 (Long Ball)
   - 防守反击 (Park the Bus)

2. 战术指令
   - 进攻宽度: 窄/中/宽
   - 防线高度: 低/中/高
   - 逼抢强度: 轻度/中度/高强度
   - 传球风格: 短传/混合/长传

3. 球员指令
   - 边后卫: 留守/进攻
   - 中场: 拖后/前插
   - 边锋: 内切/下底
   - 前锋: 拖后/突前

4. 定位球设置
   - 角球战术
   - 任意球主罚手
   - 点球手
```

#### 3.4 转会市场

**开放时间**: 夏季窗口 (周1-4) 和 冬季窗口 (周20-21)

**功能**:
- 搜索球员
- 发起报价
- 处理报价
- 租借谈判

**玩家操作**:
```
1. 搜索球员
   - 按位置筛选
   - 按能力/潜力筛选
   - 按年龄筛选
   - 按身价筛选

2. 球员详情
   - 查看属性
   - 查看合同情况
   -  scout报告
   - 历史伤病

3. 发起报价
   - 转会费 (可分期)
   - 球员交换
   - 二次转会分成
   - 附加条款

4. 处理报价
   - 接受/拒绝/还价
   - 与球员谈判合同
   - 体检安排

5. 租借市场
   - 搜索可租借球员
   - 设置租借条款
   - 工资分担谈判
```

#### 3.5 比赛日

**流程**:
```
比赛前1天:
  ├─ 新闻发布会 (可选)
  ├─ 最终阵容确认
  └─ 查看对手情报

比赛前2小时:
  ├─ 到达球场
  ├─ 查看天气/球场状况
  └─ 最终战术调整

比赛开始:
  ├─ 观看比赛 (实时/文字直播)
  ├─ 实时调整战术
  ├─ 换人调整
  └─ 查看统计数据

比赛结束:
  ├─ 查看比赛报告
  ├─ 新闻发布会 (可选)
  └─ 球员恢复/治疗
```

**比赛观看模式**:
1. **完整模式**: 观看90分钟完整比赛
2. **精彩模式**: 只看关键事件 (进球/红黄牌)
3. **文字模式**: 文字直播，快速跳过
4. **跳过模式**: 直接看结果

**比赛中操作**:
```
实时调整:
- 调整战术风格
- 换人 (最多5人)
- 改变心态 (保守/平衡/激进)
- 针对特定球员盯防
```

#### 3.6 青训系统

**功能**:
- 查看青年队
- 提拔年轻球员
- 安排青训比赛

**玩家操作**:
```
1. 青年队概览
   - 查看所有青训球员
   - 潜力新星推荐
   - 青训评级

2. 球员发展
   - 查看成长报告
   - 安排专项训练
   - 决定是否续约

3. 青训招募
   - 招募新学员 (每年一次)
   - 球探报告
   - 选择重点培养对象

4. 提拔一线队
   - 查看可提拔球员
   - 评估准备程度
   - 正式签约
```

#### 3.7 财务管理

**显示**:
```
当前赛季财务:
- 总收入: £150M
  ├─ 转播收入: £100M
  ├─ 比赛日收入: £30M
  ├─ 商业收入: £20M
- 总支出: £140M
  ├─ 球员工资: £100M
  ├─ 转会摊销: £30M
  └─ 运营成本: £10M
- 净收益: £10M
- 现金余额: £50M
```

**玩家操作**:
- 查看财务报表
- 申请球场扩建
- 调整票价
- 董事会沟通

### Phase 4: 赛季事件

#### 4.1 月度事件

**董事会会议** (每月初):
- 汇报上月表现
- 调整赛季目标
- 申请额外预算

**月度最佳**:
- 查看最佳球员/教练
- 领取奖金 (如果是你)

#### 4.2 特殊事件

**国际比赛日**:
- 球员被征召
- 查看国家队表现
- 处理FIFA病毒 (球员疲劳/伤病)

**杯赛周**:
- 足总杯/联赛杯比赛
- 欧冠/欧联比赛
- 赛程密集管理

**转会截止日**:
- 最后24小时疯狂
- 紧急引援
- 清洗冗员

### Phase 5: 赛季结束

**流程**:
```
1. 最后一场比赛
2. 最终排名确定
3. 颁奖典礼:
   - 冠军庆祝
   - 金靴奖
   - 最佳球员
   - 最佳教练
4. 赛季总结报告
5. 董事会评估
6. 球员合同到期处理
7. 新赛季准备
```

## 玩家操作界面设计

### 主菜单

```
┌────────────────────────────────────────┐
│           FM MANAGER                   │
├────────────────────────────────────────┤
│                                        │
│     [开始新游戏]                       │
│     [加载游戏]                         │
│     [多人游戏]                         │
│     [设置]                             │
│     [退出]                             │
│                                        │
└────────────────────────────────────────┘
```

### 游戏内界面布局

```
┌─────────────────────────────────────────────────────────┐
│ [Logo] 俱乐部名    £50M    S1W15    [通知] [设置] [保存] │
├──────────┬──────────────────────────────────────────────┤
│          │                                              │
│  导航    │              主内容区                        │
│          │                                              │
│ [仪表板] │                                              │
│ [阵容]   │                                              │
│ [战术]   │                                              │
│ [转会]   │                                              │
│ [赛程]   │                                              │
│ [青训]   │                                              │
│ [财务]   │                                              │
│ [董事会] │                                              │
│          │                                              │
├──────────┴──────────────────────────────────────────────┤
│  [聊天] [新闻] [快速模拟] [推进]                        │
└─────────────────────────────────────────────────────────┘
```

## 多人游戏特性

### 实时同步
- 所有玩家在同一时间线
- 比赛日同时观看
- 转会市场竞争
- 聊天系统

### 异步操作
- 各自管理俱乐部
- 非比赛时间可离线
- 定时同步进度

### 竞争元素
- 联赛排名竞争
- 转会市场竞争
- 杯赛直接对话
- 成就系统

## 技术实现建议

### 客户端架构
```
CLI Client (Python)
  ├─ TUI Interface (rich/textual)
  ├─ WebSocket Client
  ├─ Local Cache
  └─ Game State Manager
```

### 通信协议
```json
{
  "type": "player_action",
  "action": "submit_tactics",
  "data": {...},
  "timestamp": "2024-01-15T10:30:00Z"
}
```

### 状态同步
- 服务器权威状态
- 客户端预测
- 冲突解决
- 断线重连

## MVP功能优先级

### P0 - 必须实现
1. 单机完整赛季
2. 基础阵容管理
3. 基础战术设置
4. 比赛模拟
5. 存档/读档

### P1 - 重要
1. 转会系统
2. 青训系统
3. 财务系统
4. 多人联机基础

### P2 - 增强
1. LLM叙事
2. AI经理
3. 新闻系统
4. 成就系统

### P3 - 后期
1. 3D可视化
2. 音频解说
3. 移动端
4. MOD支持
